# Доработки после сидов Artel (0_economics.rb)

Список задач с учётом созданных в сидах сущностей: ресурсы (16), гильдии (6), категории и типы предприятий (контракты 6, предприятия 7, университет), уровни и формулы.

---

## 1. Иконки ресурсов

**Что есть:** В основном приложении ресурсы из базовой игры отображаются картинками из `public/images/resources/` по имени файла = `identificator` (например `gold.png`, `metal.png`). В схеме БД у модели `Resource` поля `icon` нет — используется конвенция по `identificator`.

**Что нужно:** Добавить иконки для 16 ресурсов Артели (формат PNG, имена по `identificator`):

| identificator   | Название                    |
|----------------|-----------------------------|
| izolyaciya     | Изоляция                    |
| kauchuk        | Каучук                      |
| metall         | Металл                      |
| polimery       | Полимеры                    |
| reagenty       | Реагенты                    |
| tkan           | Ткань                       |
| odezhda        | Одежда                      |
| el_komp        | Электронные компоненты      |
| farm_prep      | Фарм. препараты            |
| plastiny       | Пластины                    |
| rez_teh_izd    | Резино-технические изделия  |
| plast_izd      | Пластмассовые изделия       |
| kadry          | Кадры                       |
| stimulyatory   | Стимуляторы                 |
| bronzhevety    | Бронежилеты                 |
| ust_slezh      | Устройства слежения         |

**Варианты:**
- Класть файлы в общую папку: `public/images/resources/<identificator>.png` (например `public/images/resources/izolyaciya.png`).
- Либо завести папку движка и настроить раздачу: например `engines/artel/app/assets/images/resources/` и в API отдавать URL с учётом движка.

---

## 2. Картинки / иконки предприятий (PlantType)

**Что есть:** В схеме у `plant_types` нет полей `icon` или `image`. В базовой игре у `building_types` есть поле `icon` (строка, например класс иконки Remix Icon).

**Что нужно:** Определить, как в UI показывать типы предприятий Artel (6 контрактов + 7 предприятий + Университет):

- **Вариант A:** Миграция в движке Artel (или общая) — добавить в `plant_types` колонку `icon` (string). В сидах при создании `PlantType` задавать иконку (например Remix Icon: `ri-flask-line` для Химлаборатории, `ri-t-shirt-line` для Швейной и т.п.).
- **Вариант B:** Конвенция по картинкам: например `public/images/plant_types/<id>.png` или по slug имени (тогда нужен slug/identificator у PlantType). Тогда — подготовить изображения для 14 типов предприятий.

Список типов из сидов:
- Контракты: Изоляция, Каучук, Металл, Полимеры, Реагенты, Ткань.
- Предприятия: Комбинат синтетических изделий, Композитный цех, Участок пластмассовых изделий, Химлаборатория, Швейная, Радиоателье.
- Университет.

---

## 3. Rake-задачи для сидов Artel

**Что есть:** В `lib/tasks/custom_seed.rake` есть `db:seed:vassals` и `game:vassals`, но нет аналогов для Artel. Сиды Artel лежат в `engines/artel/db/seeds/0_economics.rb`.

**Что нужно:**
- Добавить задачу `db:seed:artel` — запуск всех сидов из `engines/artel/db/seeds/*.rb`.
- При необходимости — задача `game:artel`: пересоздание БД, миграции, сиды основного приложения (если нужны игроки, game_parameters и т.д.), затем `db:seed:artel`. Либо отдельный сценарий «только Artel» без базовых сидов — в зависимости от решений по п.4.

---

## 4. Порядок и состав сидов для режима Artel

**Что есть:** Сид `0_economics.rb` создаёт Guild, PlantCategory, PlantType, PlantLevel, PlantPlace, Resource. Не создаёт: Country (для Artel не нужны), GameParameter (текущий год и др.), Player, User и т.д.

**Что нужно уточнить и при необходимости доделать:**
- Запускается ли при игре Artel только сид Artel, или сначала базовые сиды (например `0_game_parameters`, `1_players`)?
- Если «только Artel» — нужен минимальный сид в движке (или отдельный файл), который создаёт необходимый минимум: например GameParameter (год), при необходимости пользователей/игроков.
- Если «база + Artel» — описать в README или в rake задаче порядок: например `db:seed:all` затем `db:seed:artel`, и не ломают ли базовые сиды данные Artel (например ресурсы с `country_id: nil`).

---

## 5. API / JSON для фронта

**Что есть:** Ресурсы отдаются в JSON с полями `id`, `name`, `identificator`, `params`, `country_id`. Фронт может собирать URL иконки как `/images/resources/#{identificator}.png`.

**Что сделать:**
- После добавления иконок ресурсов (п.1) — убедиться, что фронт использует тот же путь для ресурсов Artel (или добавить в API поле `icon_url` / `image_url` по конвенции).
- Если для предприятий решено использовать иконки (п.2) — добавить в jbuilder для plant_type поле `icon` (или `image_url`) и при необходимости обновить сиды.

---

## 6. Иконки / логотипы гильдий

**Что есть:** В сидах создаются гильдии с именами «А», «Б», «В», «Г», «Д», «Е», без полей для картинки.

**Что нужно (по желанию):** Если в UI гильдии отображаются с картинкой — либо добавить поле (например `Guild#icon` или `logo_url`), либо конвенцию по имени/id и положить файлы в нужную папку.

---

## 7. Категории предприятий (Контракт, Предприятие, Университет)

**Что есть:** В сидах создаются три категории: «Контракт», «Предприятие», «Университет». В схеме у `plant_categories` нет поля `icon`.

**Что нужно (по желанию):** Если в интерфейсе категории отображаются с иконкой — добавить поле или конвенцию и задать иконки/картинки для этих трёх категорий.

---

## 8. Прочее

- **Локализация:** При необходимости вынести названия ресурсов и предприятий в локали (ru/en) вместо хардкода в сидах.
- **Валидации и ограничения:** При необходимости добавить уникальность по `identificator` для ресурсов Artel (если ещё не задана на уровне модели/БД).
- **Документация:** В README движка Artel описать, как запускать сиды (`db:seed:artel` / `game:artel`), от чего они зависят и что ещё нужно (иконки, порядок сидов).

---

## Краткий чек-лист

| # | Задача | Приоритет |
|---|--------|-----------|
| 1 | Иконки ресурсов (16 PNG по identificator) | высокий |
| 2 | Иконки/картинки для типов предприятий (14 PlantType) | высокий |
| 3 | Rake: `db:seed:artel` и при необходимости `game:artel` | высокий |
| 4 | Определить порядок сидов и минимальный набор для режима Artel | средний |
| 5 | API/фронт: путь к иконкам ресурсов и предприятий | средний |
| 6 | Иконки гильдий (опционально) | низкий |
| 7 | Иконки категорий предприятий (опционально) | низкий |
| 8 | Локализация, валидации, README | по необходимости |
